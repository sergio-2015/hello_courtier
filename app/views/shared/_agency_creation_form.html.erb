<div class="broker-profile-content-create_agency">
  <div class="broker-profile-content-create_agency-title">
    <% if params[:action] == "edit" %>
      <h2>Mettre à jour de la fiche de mon agence</h2>
    <% else %>
      <h2>Créer la fiche de mon agence</h2>
    <% end %>
  </div>

<!-- , url: broker_agencies_path, method: :post -->

  <div class="broker-profile-content-create_agency-form">
    <%= form_for(@broker_agency) do |f| %>
      <div class="broker-profile-content-create_agency-form-main">
        <div class="broker-profile-content-create_agency-form-main-group">
          <div class="broker-profile-content-create_agency-form-main-group-right">
            <%= f.label :name, "Nom de l'agence" %>
          </div>
          <div class="broker-profile-content-create_agency-form-main-group-left">
            <%= f.text_field :name, placeholder: "Nom de l'agence" %>
          </div>
        </div>
      </div>
      <div class="broker-profile-content-create_agency-form-main">
        <div class="broker-profile-content-create_agency-form-main-group">
          <div class="broker-profile-content-create_agency-form-main-group-right">
            <%= f.label :street, "Adresse" %>
          </div>
          <div class="broker-profile-content-create_agency-form-main-group-left">
            <%= f.text_field :street, placeholder: "Adresse" %>
          </div>
        </div>
        <div class="broker-profile-content-create_agency-form-main-group">
          <div class="broker-profile-content-create_agency-form-main-group-right">
            <%= f.label :zipcode, "Code postal" %>
          </div>
          <div class="broker-profile-content-create_agency-form-main-group-left">
            <%= f.text_field :zipcode, placeholder: "Code postal" %>
          </div>
        </div>
        <div class="broker-profile-content-create_agency-form-main-group">
          <div class="broker-profile-content-create_agency-form-main-group-right">
            <%= f.label :city, "Ville" %>
          </div>
          <div class="broker-profile-content-create_agency-form-main-group-left">
            <%= f.text_field :city, placeholder: "Ville" %>
          </div>
        </div>
      </div>

      <div class="broker-profile-content-create_agency-form-main">
        <div class="broker-profile-content-create_agency-form-main-group">
          <div class="broker-profile-content-create_agency-form-main-group-right">
            <%= f.label :phone_number, "Téléphone" %>
          </div>
          <div class="broker-profile-content-create_agency-form-main-group-left">
            <%= f.text_field :phone_number, placeholder: "Téléphone" %>
          </div>
        </div>
        <div class="broker-profile-content-create_agency-form-main-group">
          <div class="broker-profile-content-create_agency-form-main-group-right">
            <%= f.label :email, "Email de l'agence" %>
          </div>
          <div class="broker-profile-content-create_agency-form-main-group-left">
            <%= f.email_field :email, placeholder: "Email" %>
          </div>
        </div>
        <div class="broker-profile-content-create_agency-form-main-group">
          <div class="broker-profile-content-create_agency-form-main-group-right">
            <%= f.label :website, "Site internet" %>
          </div>
          <div class="broker-profile-content-create_agency-form-main-group-left">
            <%= f.text_field :website, placeholder: "Site internet" %>
          </div>
        </div>
      </div>

      <div class="broker-profile-content-create_agency-form-main">
        <div class="broker-profile-content-create_agency-form-main-group">
          <div class="broker-profile-content-create_agency-form-main-group-right">
            <%= f.label :description, "Description" %>
          </div>
          <div class="broker-profile-content-create_agency-form-main-group-left">
            <%= f.text_area :description, placeholder: "Description", rows: 5 %>
          </div>
        </div>
        <div class="broker-profile-content-create_agency-form-main-group">
          <div class="broker-profile-content-create_agency-form-main-group-right">
            <%= f.label :creation_year, "Année de création" %>
          </div>
          <div class="broker-profile-content-create_agency-form-main-group-left">
            <%= f.number_field :creation_year, placeholder: "Date de création de l'agence" %>
          </div>
        </div>
        <div class="broker-profile-content-create_agency-form-main-group">
          <div class="broker-profile-content-create_agency-form-main-group-right">
            <%= f.label :siret, "Numéro de SIRET" %>
          </div>
          <div class="broker-profile-content-create_agency-form-main-group-left">
            <%= f.text_field :siret, placeholder: "N° de Siret" %>
          </div>
        </div>
      </div>

      <div class="broker-profile-content-create_agency-form-main">
        <div class="broker-profile-content-create_agency-form-main-group">
          <div class="broker-profile-content-create_agency-form-main-group-right">
            <%= f.label :facebook_account, "Page Facebook" %>
          </div>
          <div class="broker-profile-content-create_agency-form-main-group-left">
            <%= f.text_field :facebook_account, placeholder: "Facebook" %>
          </div>
        </div>
        <div class="broker-profile-content-create_agency-form-main-group">
          <div class="broker-profile-content-create_agency-form-main-group-right">
            <%= f.label :twitter_account, "Twitter" %>
          </div>
          <div class="broker-profile-content-create_agency-form-main-group-left">
            <%= f.text_field :twitter_account, placeholder: "Page Twitter" %>
          </div>
        </div>
        <div class="broker-profile-content-create_agency-form-main-group">
          <div class="broker-profile-content-create_agency-form-main-group-right">
            <%= f.label :linkedin_account, "LinkedIn" %>
          </div>
          <div class="broker-profile-content-create_agency-form-main-group-left">
            <%= f.text_field :linkedin_account, placeholder: "Page LinkedIn" %>
          </div>
        </div>
      </div>


      <% if @broker_agency.id.present? %>
        <div class="broker-profile-content-create_agency-form-main">
          <% @broker_agency.expertises.each_with_index do |expertise, index| %>

            <div class="broker-profile-content-create_agency-form-main-group" id="expertise_group_<%= index %>">
              <div class="broker-profile-content-create_agency-form-main-group-gauche">
                <%= f.label "expertise_id_#{index+1}", "Expertise" %>
              </div>
              <div class="broker-profile-content-create_agency-form-main-group-centre">
                <%= f.select "expertise_id_#{index+1}", options_from_collection_for_select(@expertises, :id, :name, expertise.id) %>
              </div>
              <div class="broker-profile-content-create_agency-form-main-group-droite">
                <% if index < 3 %>
                  <span id="add_an_expertise_<%= index + 1 %>"><i class="fa fa-plus-circle" aria-hidden="true"></i>&nbsp Ajouter / supprimer expertise</span>
                <% end %>
              </div>
            </div>
          <% end %>

          <% number_of_expertises = @broker_agency.expertises.count %>
          <% i = 0 %>
          <% (4 - number_of_expertises).times do %>

            <div class="broker-profile-content-create_agency-form-main-group hidden" id="expertise_group_<%= number_of_expertises + i %>">
              <div class="broker-profile-content-create_agency-form-main-group-gauche">
                <%= f.label "expertise_id_#{number_of_expertises + 1 + i}", "Expertise" %>
              </div>
              <div class="broker-profile-content-create_agency-form-main-group-centre">
                <%= f.select "expertise_id_#{number_of_expertises + 1 + i}", options_from_collection_for_select(@expertises, :id, :name, :id) %>
              </div>
              <div class="broker-profile-content-create_agency-form-main-group-droite">
                <% if i < (4 - number_of_expertises - 1) %>
                  <span id="add_an_expertise_<%= number_of_expertises + 1 + i %>"><i class="fa fa-plus-circle" aria-hidden="true"></i>&nbsp Ajouter / supprimer expertise</span>
                <% end %>
              </div>

            </div>
            <% i += 1 %>
          <% end %>

        </div>

      <% else %>

        <div class="broker-profile-content-create_agency-form-main">
          <div class="broker-profile-content-create_agency-form-main-group">
            <div class="broker-profile-content-create_agency-form-main-group-gauche">
              <%= f.label :expertise_id_1, "Expertise" %>
            </div>
            <div class="broker-profile-content-create_agency-form-main-group-centre">
              <%= f.select :expertise_id_1, options_from_collection_for_select(@expertises, :id, :name, 19) %>
            </div>
            <div class="broker-profile-content-create_agency-form-main-group-droite">
              <span id="add_an_expertise_1"><i class="fa fa-plus-circle" aria-hidden="true"></i>&nbsp Ajouter / supprimer expertise</span>
            </div>
          </div>

          <div class="broker-profile-content-create_agency-form-main-group hidden" id="expertise_group_1">
            <div class="broker-profile-content-create_agency-form-main-group-gauche">
              <%= f.label :expertise_id_2, "Expertise" %>
            </div>
            <div class="broker-profile-content-create_agency-form-main-group-centre">
              <%= f.select :expertise_id_2, options_from_collection_for_select(@expertises, :id, :name, 20), {}, { disabled: true} %>
            </div>
            <div class="broker-profile-content-create_agency-form-main-group-droite">
              <span id="add_an_expertise_2"><i class="fa fa-plus-circle" aria-hidden="true"></i>&nbsp Ajouter / supprimer expertise</span>
            </div>
          </div>

          <div class="broker-profile-content-create_agency-form-main-group hidden" id="expertise_group_2">
            <div class="broker-profile-content-create_agency-form-main-group-gauche">
              <%= f.label :expertise_id_3, "Expertise" %>
            </div>
            <div class="broker-profile-content-create_agency-form-main-group-centre">
              <%= f.select :expertise_id_3, options_from_collection_for_select(@expertises, :id, :name, 21), {}, { disabled: true}  %>
            </div>
            <div class="broker-profile-content-create_agency-form-main-group-droite">
              <span id="add_an_expertise_3"><i class="fa fa-plus-circle" aria-hidden="true"></i>&nbsp Ajouter / supprimer expertise</span>
            </div>
          </div>

          <div class="broker-profile-content-create_agency-form-main-group hidden" id="expertise_group_3">
            <div class="broker-profile-content-create_agency-form-main-group-gauche">
              <%= f.label :expertise_id_4, "Expertise" %>
            </div>
            <div class="broker-profile-content-create_agency-form-main-group-centre">
              <%= f.select :expertise_id_4, options_from_collection_for_select(@expertises, :id, :name, 22), {}, { disabled: true}  %>
            </div>
            <div class="broker-profile-content-create_agency-form-main-group-droite">
            </div>
          </div>

        </div>

      <% end %>

      <div class="broker-profile-content-create_agency-form-button cta-transaction large_button text-center">
        <%= f.button "Valider" %>
      </div>


    <% end %>
  </div>
</div>
